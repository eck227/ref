<!DOCTYPE html>
<html lang="pt">
<head>
    <style>
.music-container {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 200px;
    opacity: 0.3;
    text-align: center;
}
.music-info {
    font-size: 8px;
    margin-bottom: 3px;
}
.progress-container {
    width: 100%;
    height: 3px;
    background: #333;
    border-radius: 2px;
    cursor: pointer;
    position: relative;
}
.progress-bar {
    height: 100%;
    width: 0%;
    background: white;
    border-radius: 2px;
    transition: width 0.1s linear;
}
.time-info {
    display: flex;
    justify-content: center; /* Agora só o tempo atual fica no meio */
    font-size: 7px;
    margin-top: 2px;
}
    </style>    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" href="images/money.png" type="images/x-icon"> <!-- Favicon adicionado -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            background-color: black;
            color: white;
            font-family: 'Poppins', sans-serif;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .parentt {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        .card {
            background: black;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 200px;
            height: 250px;
            animation: pulsate 2s infinite;
        }
        @keyframes pulsate {
            0% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.05); }
            50% { box-shadow: 0 10px 20px rgba(255, 255, 255, 0.15); }
            100% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.05); }
        }
        .profile-img {
            width: 98px;
            height: 98px;
            border-radius: 50%;
            object-fit: cover;
            margin-top: 35px;
        }
        .username {
            display: block;
            font-size: 22px;
            font-weight: 700;
            color: white;
            margin-top: 15px;
        }
        .nickname {
            display: block;
            font-size: 16px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.4);
            margin-top: -5px;
        }
        .badges {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
        }
        .badge {
            width: 22px;
            height: 22px;
            background-size: cover;
        }
        
    </style>
</head>
<body>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil do Discord</title>
    <style>
        body { background-color: black; color: white; text-align: center; font-family: Arial, sans-serif; }
        .card { border: 1px solid white; padding: 20px; margin: 20px; display: inline-block; width: 250px; text-align: center; }
        .profile-img { width: 100px; height: 100px; border-radius: 50%; }
        .badges { margin-top: 10px; }
        .badge { width: 30px; height: 30px; margin: 3px; }
    </style>
</head>
<body>

    <h1>Perfis do Discord</h1>

    <!-- 3 Cards com IDs do Discord -->
    <div class="card" data-user-id="123456789012345678" data-badges="admin,nitro">
        <img class="profile-img" src="" alt="Avatar">
        <h2 class="username">Carregando...</h2>
        <p class="nickname">@nickname</p>
        <div class="badges"></div>
    </div>

    <div class="card" data-user-id="987654321098765432" data-badges="streamer,vip">
        <img class="profile-img" src="" alt="Avatar">
        <h2 class="username">Carregando...</h2>
        <p class="nickname">@nickname</p>
        <div class="badges"></div>
    </div>

    <div class="card" data-user-id="112233445566778899" data-badges="membro">
        <img class="profile-img" src="" alt="Avatar">
        <h2 class="username">Carregando...</h2>
        <p class="nickname">@nickname</p>
        <div class="badges"></div>
    </div>

    <script>
        async function updateDiscordProfiles() {
            document.querySelectorAll(".card[data-user-id]").forEach(async (card) => {
                const userId = card.getAttribute("data-user-id");
                try {
                    const response = await fetch(`http://localhost:3000/discord/${userId}`);
                    if (!response.ok) throw new Error("Erro ao buscar dados do Discord");

                    const data = await response.json();

                    // Atualiza imagem, nome e nickname no site
                    card.querySelector(".profile-img").src = `https://cdn.discordapp.com/avatars/${userId}/${data.avatar}.png?size=2048`;
                    card.querySelector(".username").innerText = data.username;
                    card.querySelector(".nickname").innerText = `@${data.discriminator}`;

                    // Adiciona badges manuais (imagens)
                    const badgeContainer = card.querySelector(".badges");
                    badgeContainer.innerHTML = "";
                    const badges = card.getAttribute("data-badges").split(",");
                    badges.forEach(badge => {
                        const img = document.createElement("img");
                        img.src = `badges/${badge}.png`; // Imagem da pasta badges
                        img.classList.add("badge");
                        badgeContainer.appendChild(img);
                    });

                } catch (error) {
                    console.error("Erro ao atualizar perfil do Discord:", error);
                }
            });
        }

        updateDiscordProfiles();
    </script>
    <div class="music-container">
        <div class="music-info"> <span id="music-name">Nome da Música</span></div>
        <div class="progress-container" id="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="time-info">
            <span id="current-time">0:00</span>
        </div>
        <audio id="music-player" autoplay loop>
            <source src="media/comedinha.mp3" type="audio/mpeg">
            Seu navegador não suporta áudio.
        </audio>
    </div>            
    <script>
        window.onload = function() {
            if (sessionStorage.getItem("playMusic") === "true") {
                let audio = new Audio("media/duplicado.mp3");
                audio.loop = true;
                audio.play();
                sessionStorage.setItem("musicPlaying", "true");
            }
            window.history.pushState({}, "", "/");
        };
    const titles = ["NÓS", "FICOU", "ENJOADÃO", "DISCORD.GG/REF"];
        let titleIndex = 0;
        
        function changeTitle() {
            let currentTitle = titles[titleIndex];
            let tempTitle = "";
            let index = 0;
            
            function typeEffect() {
                if (index < currentTitle.length) {
                    tempTitle += currentTitle[index];
                    document.title = tempTitle;
                    index++;
                    setTimeout(typeEffect, 150);
                } else {
                    setTimeout(() => {
                        titleIndex = (titleIndex + 1) % titles.length;
                        changeTitle();
                    }, 2000);
                }
            }
            
            document.title = "";
            typeEffect();
        }
        
        changeTitle();
    window.addEventListener("popstate", function (event) {
        window.location.href = "/";
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".card").forEach(card => {
            card.addEventListener("click", function () {
                let url = this.getAttribute("data-url");
                if (url) {
                    window.open(url, "_blank");
                }
            });
        });
    });
</script>
<script>
    const audio = document.getElementById("music-player");
    const progressBar = document.getElementById("progress-bar");
    const progressContainer = document.getElementById("progress-container");
    const currentTimeEl = document.getElementById("current-time");
    const musicName = document.getElementById("music-name");

    musicName.innerText = "05 - COMEDINHA FICOU BRAVO - DJ JAPA NK, MC NEGÃO ORIGINAL & MC MENO KK";

    function updateMusicTime() {
        if (!isNaN(audio.duration)) {
            let currentMinutes = Math.floor(audio.currentTime / 60);
            let currentSeconds = Math.floor(audio.currentTime % 60);
            if (currentSeconds < 10) currentSeconds = "0" + currentSeconds;

            currentTimeEl.innerText = `${currentMinutes}:${currentSeconds}`;

            let progressPercent = (audio.currentTime / audio.duration) * 100;
            progressBar.style.width = progressPercent + "%";
        }
    }

    // Atualiza tempo e barra de progresso
    audio.addEventListener("timeupdate", updateMusicTime);

    // Permite clicar na barra para avançar a música
    progressContainer.addEventListener("click", (e) => {
        const width = progressContainer.clientWidth;
        const clickX = e.offsetX;
        const duration = audio.duration;
        if (!isNaN(duration)) {
            audio.currentTime = (clickX / width) * duration;
            updateMusicTime();
        }
    });
    
</script>
</body>
</html>

